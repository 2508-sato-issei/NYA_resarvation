<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}" rel="stylesheet"/>
    <script th:src="@{/js/main.js}"></script>
    <title>予約変更画面</title>
</head>
<body class="bg-light">
<header>
    <div th:replace="fragments/navbar :: navbar"></div>
    <!--パンくずリスト-->
    <nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb p-3 bg-light rounded-2">
            <li class="breadcrumb-item"><a th:href="@{/}">ホーム</a></li>
            <li class="breadcrumb-item"><a th:href="@{/mypage}">マイページ</a></li>
            <li class="breadcrumb-item active" aria-current="page">予約変更画面</li>
        </ol>
    </nav>
</header>
<div class="container">
    <h2>予約変更</h2>

    <!-- エラーメッセージ表示 -->
    <div th:if="${errorMessages}">
        <p class="error" th:each="err : ${errorMessages}" th:text="${err}"></p>
    </div>

    <!-- 予約変更フォーム -->
    <form th:action="@{/reservation/update/{id}(id=${formModel.id})}" th:object="${formModel}" th:method="post" novalidate>
        <input type="hidden" name="_method" value="put"/>

        <input type="hidden" th:field="*{restaurantId}">
        <input type="hidden" th:field="*{userId}">

        <!-- 予約日 -->
        <label for="reservationDate">予約日</label>
        <input type="date" id="reservationDate" th:field="*{reservationDate}">
        <div class="error" th:if="${#fields.hasErrors('reservationDate')}" th:errors="*{reservationDate}"></div>

        <!-- 予約時間 -->
        <label for="timeSelect">予約時間</label>
        <div th:if="${#fields.hasErrors('reservationTime')}" th:errors="*{reservationTime}"></div>
        <select id="timeSelect"
                th:field="*{reservationTime}"
                th:attr="data-start=${restaurant.startBusiness}, data-end=${restaurant.endBusiness}">
        </select>
        <input type="hidden" id="currentTime" th:value="${formModel.reservationTime}">

        <!-- 人数 -->
        <label for="headcount">人数</label>
        <input type="number" id="headcount" th:field="*{headcount}" min="1"
               th:max="${restaurant.capacity}">
        <div class="error" th:if="${#fields.hasErrors('headcount')}" th:errors="*{headcount}"></div>

        <!-- ボタン -->
        <div class="button-area">
            <button type="submit">変更</button>
        </div>
    </form>
</div>
    <!-- WebJarスクリプト -->
    <script th:src="@{/webjars/jquery/3.3.1/js/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>
</body>
</html>